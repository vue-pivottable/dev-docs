# Vue Pivottable 라이브러리 구조 분석

## 목차

1. [현재 컴포넌트 구조 (AS-IS)](#1-현재-컴포넌트-구조-as-is)
   - [핵심 컴포넌트](#11-핵심-컴포넌트)
   - [UI 및 렌더링 컴포넌트](#12-ui-및-렌더링-컴포넌트)
   - [테이블 렌더러 컴포넌트](#13-테이블-렌더러-컴포넌트)
   - [헬퍼 함수](#14-헬퍼-함수)

## 1. 현재 컴포넌트 구조 (AS-IS)

### 1.1 핵심 컴포넌트

#### VuePivottable 컴포넌트

| Props/메서드 | 상세 설명 | 참고사항 |
|--------------|-----------|----------|
| `data` | 피벗 테이블에 표시할 원본 데이터로 배열, 객체 또는 함수 형태가 될 수 있습니다. 필수 속성이며 데이터 형식에 따라 내부적으로 다르게 처리됩니다. | src/helper/common.js (10-13줄) |
| `rows` | 행으로 사용할 필드들을 지정하는 문자열 배열입니다. 이 필드들을 기준으로 데이터가 행으로 그룹화됩니다. | src/helper/common.js (54-59줄) |
| `cols` | 열로 사용할 필드들을 지정하는 문자열 배열입니다. 이 필드들을 기준으로 데이터가 열로 그룹화됩니다. | src/helper/common.js (48-53줄) |
| `vals` | 집계할 값 필드들을 지정하는 문자열 배열입니다. 이 필드들은 선택한 집계 함수에 따라 계산됩니다. | src/helper/common.js (60-65줄) |

#### VuePivottableUi 컴포넌트

| Props/메서드 | 상세 설명 | 참고사항 |
|--------------|-----------|----------|
| `async` | 비동기 모드 활성화 여부를 결정하는 불리언 값입니다. 활성화되면 필터 박스가 비동기적으로 로드됩니다. | src/PivottableUi.js (12-15줄) |
| `hiddenAttributes` | UI에서 완전히 숨길 속성들의 배열입니다. 이 속성들은 드롭다운이나 드래그 영역에 표시되지 않습니다. | src/PivottableUi.js (16-21줄) |
| `menuLimit` | 필터 메뉴에 표시할 최대 항목 수를 지정하는 숫자입니다. 이 값을 초과하면 검색 기능이 활성화됩니다. | src/PivottableUi.js (42-45줄) |

#### DraggableAttribute 컴포넌트

| Props/메서드 | 상세 설명 | 참고사항 |
|--------------|-----------|----------|
| `name` | 속성의 이름을 지정하는 문자열입니다. 이 값은 필수이며 UI에 표시되고 데이터 필드 참조에 사용됩니다. | src/DraggableAttribute.js (17-20줄) |
| `attrValues` | 속성이 가질 수 있는 모든 가능한 값을 포함하는 객체입니다. 필터 메뉴를 구성하는 데 사용됩니다. | src/DraggableAttribute.js (21-24줄) |
| `valueFilter` | 현재 적용된 필터 상태를 나타내는 객체입니다. 키는 필터링할 값이고, 값은 필터링 여부(true/false)입니다. | src/DraggableAttribute.js (25-29줄) |

#### Dropdown 컴포넌트

| Props/메서드 | 상세 설명 | 참고사항 |
|--------------|-----------|----------|
| `values` | 드롭다운에 표시할 옵션 목록을 담은 배열입니다. 사용자가 선택할 수 있는 모든 값을 포함합니다. | src/Dropdown.js (2줄) |
| `value` | 현재 선택된 값을 나타내는 prop입니다. v-model과 함께 사용되어 양방향 바인딩을 지원합니다. | src/Dropdown.js (2줄) |
| `handleChange` | 드롭다운 값이 변경될 때 호출되는 메서드로, 선택된 새 값을 부모 컴포넌트에 알립니다. | src/Dropdown.js (9-11줄) |

### 1.2 UI 및 렌더링 컴포넌트

#### CreatePivottable 컴포넌트

| 인자/속성 | 상세 설명 | 참고사항 |
|-----------|-----------|----------|
| `h` (인자) | Vue의 createElement 함수로, 가상 DOM 요소를 생성하는 데 사용됩니다. | src/Pivottable.js (10줄) |
| `rendererItems` | 사용 가능한 모든 렌더러 컴포넌트를 포함하는 객체입니다. 선택된 rendererName에 따라 적절한 렌더러를 사용합니다. | src/Pivottable.js (10-12줄) |
| `rendererName` | 현재 선택된 렌더러의 이름입니다. 이 값을 기반으로 적절한 렌더러 컴포넌트가 선택됩니다. | src/Pivottable.js (11줄) |
| `localeStrings` | 지역화된 UI 문자열을 제공하는 객체로, 선택된 locale에 따라 적절한 번역을 적용합니다. | src/Pivottable.js (14-16줄) |

#### CreateWrapperContainer 컴포넌트

| 인자/속성 | 상세 설명 | 참고사항 |
|-----------|-----------|----------|
| `h` (인자) | Vue의 createElement 함수로, 가상 DOM 요소를 생성하는 데 사용됩니다. | src/Pivottable.js (20줄) |
| `tableMaxWidth` | 테이블의 최대 너비를 지정하는 숫자 값입니다. 0이면 제한이 없습니다. | src/Pivottable.js (25줄) |
| `createPivottable` | 실제 피벗 테이블 컴포넌트를 생성하는 메서드를 호출하여 컨테이너 내부에 렌더링합니다. | src/Pivottable.js (26-27줄) |

#### MakeDnDCell 컴포넌트

| 인자/속성 | 상세 설명 | 참고사항 |
|-----------|-----------|----------|
| `e` (인자) | 속성 목록 배열로, 이 속성들이 드래그 가능한 항목으로 표시됩니다. | src/PivottableUi.js (242줄) |
| `n` (인자) | 드래그 이벤트 핸들러 함수로, 드래그 완료 시 호출됩니다. | src/PivottableUi.js (243줄) |
| `o` (인자) | CSS 클래스 문자열로, 컨테이너의 스타일을 정의합니다. | src/PivottableUi.js (244줄) |
| `t` (인자) | 렌더링 함수(h)로, 컴포넌트의 실제 DOM 요소를 생성합니다. | src/PivottableUi.js (245줄) |
| `zIndices` | 필터 박스의 z-index 값을 제어하는 객체로, 여러 필터 박스의 레이어 순서를 관리합니다. | src/PivottableUi.js (262줄) |

#### RendererCell 컴포넌트

| 인자/속성 | 상세 설명 | 참고사항 |
|-----------|-----------|----------|
| `e` (인자) | 현재 선택된 렌더러 이름 문자열입니다. | src/PivottableUi.js (298줄) |
| `n` (인자) | 렌더링 함수(h)로, 컴포넌트의 실제 DOM 요소를 생성합니다. | src/PivottableUi.js (298줄) |
| `rendererItems` | 사용 가능한 모든 렌더러 컴포넌트를 포함하는 객체입니다. 드롭다운 옵션으로 표시됩니다. | src/PivottableUi.js (309줄) |
| `propUpdater` | 내부 상태를 업데이트하는 함수를 생성하는 메서드를 호출합니다. 렌더러 변경 시 사용됩니다. | src/PivottableUi.js (310-312줄) |

### 1.3 테이블 렌더러 컴포넌트

#### 기본 테이블 렌더러

| 메서드/속성 | 상세 설명 | 참고사항 |
|-------------|-----------|----------|
| `makeRenderer` | 다양한 옵션을 가진 테이블 렌더러 컴포넌트를 생성하는 팩토리 함수입니다. 히트맵 모드 등을 지원합니다. | src/TableRenderer.js (8-377줄) |
| `spanSize` | 피벗 테이블에서 행이나 열의 셀 병합 크기를 계산하는 헬퍼 메서드입니다. 행/열 헤더의 적절한 표시를 위해 필요합니다. | src/TableRenderer.js (42-82줄) |
| `getClickHandler` | 셀 클릭 이벤트 핸들러를 생성하는 메서드입니다. 셀의 값, 행 값, 열 값에 접근할 수 있는 콜백 함수를 반환합니다. | src/TableRenderer.js (167-187줄) |

#### TSV 내보내기 렌더러

| 메서드/속성 | 상세 설명 | 참고사항 |
|-------------|-----------|----------|
| `TSVExportRenderer` | 피벗 테이블 데이터를 TSV(Tab-Separated Values) 형식으로 내보내는 렌더러 컴포넌트입니다. | src/TableRenderer.js (379-422줄) |

#### 히트맵 렌더러

| 메서드/속성 | 상세 설명 | 참고사항 |
|-------------|-----------|----------|
| `redColorScaleGenerator` | 데이터 값을 빨간색 강도로 변환하는 함수로, 히트맵 시각화에 기본적으로 사용됩니다. | src/TableRenderer.js (3-7줄) |
| `heatmapMode` | 히트맵 모드를 지정하는 문자열입니다. 'full', 'row', 'col' 값이 가능하며 각각 다른 방식으로 히트맵을 적용합니다. | src/TableRenderer.js (89-136줄) |

### 1.4 헬퍼 함수

#### 데이터 처리 및 집계

| 메서드/속성 | 상세 설명 | 참고사항 |
|-------------|-----------|----------|
| `PivotData` | 피벗 테이블의 핵심 기능을 담당하는 클래스로, 데이터를 처리하고 집계합니다. | src/helper/utils.js (464-645줄) |
| `aggregatorTemplates` | 다양한 집계 함수 템플릿을 제공하는 객체입니다. | src/helper/utils.js (89-256줄) |
| `aggregators` | 미리 정의된 집계 함수들의 집합입니다. | src/helper/utils.js (264-287줄) |
| `numberFormat` | 숫자 포맷팅 함수를 생성하는 함수입니다. | src/helper/utils.js (15-30줄) |

#### 필터링 및 정렬

| 함수/메서드 | 상세 설명 | 참고사항 |
|-------------|-----------|----------|
| `naturalSort` | 자연 정렬 알고리즘을 구현한 함수입니다. | src/helper/utils.js (45-79줄) |
| `sortAs` | 특정 순서로 정렬하기 위한 함수를 생성합니다. | src/helper/utils.js (80-104줄) |
| `getSort` | 속성에 맞는 정렬 함수를 반환합니다. | src/helper/utils.js (105-117줄) |
